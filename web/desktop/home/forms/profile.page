<include src="__WEB_ROOT__/desktop/common/head.page" />
<include src="__WEB_ROOT__/desktop/components/uploader/image.page" /> <!-- 引入部件 -->

<div class="uk-flex uk-flex-center">

<!-- 用户资料表单 -->
<form	class="uk-form-horizontal iframe-form uk-width-xxlarge"  mp:if="{{option.user_mobile_signup_on == 1}}"
		method="POST" 
		action="/_api/xpmsns/user/user/login" 
		success="function(data) {
			var $user = $validate.utils.user;
			var $utils = $validate.utils;
			$user.login(data);
			$utils.parentClose();
		}" 
	>

	<div class="uk-margin ">
		<h3>个人资料 <span uk-loading="ratio:0.8" class="uk-margin-small-left"></span></h3>
	</div>
	
	<!-- 呈现错误信息 -->
	<div class="message uk-alert-danger uk-hidden" uk-alert> <p></p></div>
	
	<!-- 用户头像 -->
	<div class="uk-form-group uk-margin" >
		<label class="uk-form-label uk-form-large">背景: </label>
		<div class="uk-form-controls jm-uploader-image-large">
			<uploader 
				url="/_api/xpmsns/user/user/upload?_n=headimgurl"
				src=""
				max="2048"
				allow="/(\.|\/)(gif|jpe?g|png|xls|xlsx|ai)$/i"
				accept=".ai,.png"
				name="background" type="image" crop="ratio:1"
				disabled
				class="jm-form-large">上传背景</uploader>
		</div>
	</div> <!-- 用户头像 -->

	<!-- 用户头像 -->
	<div class="uk-form-group uk-margin" >
		<label class="uk-form-label uk-form-large">头像: </label>
		<div class="uk-form-controls jm-uploader-image-large">
			<uploader 
				url="/_api/xpmsns/user/user/upload?_n=headimgurl"
				src="http://img06.tooopen.com/images/20160720/tooopen_sy_170954359773.jpg" 
				name="headimgurl" type="image" crop="ratio:1"
				disabled
				class="jm-form-large jm-border-circle">上传头像</uploader>
		</div>
	</div> <!-- 用户头像 -->

	<!-- 背景图片 -->
	<div class="uk-form-group uk-margin" >
		<label class="uk-form-label uk-form-large">批量上传: </label>
		<div class="uk-form-controls jm-uploader-image-large">
			<uploader
				url="/_api/xpmsns/user/user/upload?_n=background"
				src="http://img06.tooopen.com/images/20160720/tooopen_sy_170954359773.jpg,https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1537714086961&di=5a1e8a779c375347d0b519c00086c577&imgtype=0&src=http%3A%2F%2F4493bz.1985t.com%2Fuploads%2Fallimg%2F150721%2F1-150H1140632.jpg"
				name="mult" type="image" crop="ratio:0.5625"
				maxChunkSize="102400"
				disabled
				class="jm-form-large" multiple >上传多图</uploader>
		</div>
	</div> <!-- 背景图片 -->


	<!-- 固定比率 -->
	<div class="uk-form-group uk-margin" >
		<label class="uk-form-label uk-form-large">固定比例: </label>
		<div class="uk-form-controls jm-uploader-image-large">
			<uploader
				url="/_api/xpmsns/user/user/upload?_n=background"
				src="http://img06.tooopen.com/images/20160720/tooopen_sy_170954359773.jpg,https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1537714086961&di=5a1e8a779c375347d0b519c00086c577&imgtype=0&src=http%3A%2F%2F4493bz.1985t.com%2Fuploads%2Fallimg%2F150721%2F1-150H1140632.jpg"
				name="ratio" type="image" crop="ratio:0.5625"
				ratio="16/9"
				class="jm-form-large" multiple >上传图片</uploader>
		</div>
	</div> <!-- 固定比率 -->


	<!-- 自由比率 -->
	<div class="uk-form-group uk-margin" >
		<label class="uk-form-label uk-form-large">自由比例: </label>
		<div class="uk-form-controls jm-uploader-image-large">
			<uploader
				url="/_api/xpmsns/user/user/upload?_n=background"
				src="http://img06.tooopen.com/images/20160720/tooopen_sy_170954359773.jpg,https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1537714086961&di=5a1e8a779c375347d0b519c00086c577&imgtype=0&src=http%3A%2F%2F4493bz.1985t.com%2Fuploads%2Fallimg%2F150721%2F1-150H1140632.jpg"
				name="freeratio" type="image" crop="ratio:0.5625"
				allow="/(\.|\/)(gif|jpe?g|png)$/i"
				accept=".gif,.jpg,.jpeg,.png"
				ratio="auto"
				class="jm-form-large" multiple >自由比例</uploader>
		</div>
	</div> <!-- 固定比率 -->

	<!-- 账号等级 -->
	<div class="uk-form-group uk-margin" >
		<label class="uk-form-label uk-form-large">会员类型: </label>
		<div class="uk-form-controls">
			<div class="uk-form-large uk-padding-remove-left" >
				<span class="uk-text-muted" > 普通用户 </span>
				<span class="uk-text-muted"> 24级 </span>
				<a href="#" class="uk-link-muted uk-hidden"> 升级 </a>
			</div>
		</div>
	</div> <!-- 账号等级 -->


	<!-- 手机号 -->
	<div class="uk-form-group uk-margin " >
		<label class="uk-form-label uk-form-large">手机号码: </label>
		<div class="uk-form-controls">
			<div class="uk-flex">
				<input name="mobile" type="text" class="uk-input uk-form-large uk-disabled uk-margin-right" 
					   placeholder="请输入手机号" 
					   value="{{user.mobile}}"
					   disabled 
					   validate="{
					   		required:true, 
					   		messages: {
								required:'请填写手机号码'
					   		}
					   	}
					">
				<button class="uk-button uk-button-primary uk-form-large uk-width-small" type="button"> 更换手机号 </button>
			</div>
			<div class="uk-helper uk-helper-danger"></div>
		</div>
	</div> <!-- END 手机号 -->
	
	<!-- 用户昵称 -->
	<div class="uk-form-group uk-margin " >
		<label class="uk-form-label uk-form-large">昵称: </label>
		<div class="uk-form-controls">
			<input name="nickname" type="text" class="uk-input uk-form-large" 
				   placeholder="请输入昵称" 
				   validate="{
				   		required:true, 
				   		messages: {
							required:'请填写昵称'
				   		}
				   	}
				">
			<div class="uk-helper uk-helper-danger"></div>
		</div>
	</div> <!-- END 用户昵称 -->

	<!-- 简介 -->
	<div class="uk-form-group uk-margin " >
		<label class="uk-form-label uk-form-large">个人简介: </label>
		<div class="uk-form-controls">
			<textarea name="bio" type="text"  rows="3" class="uk-textarea uk-form-large" 
				   placeholder="请输入个人简介" 
				   validate="{
				   		required:true, 
				   		messages: {
							required:'请填写个人简介'
				   		}
				   	}
				"></textarea>
			<div class="uk-helper uk-helper-danger"></div>
		</div>
	</div> <!-- END 简介 -->
	
	<!-- 图形验证码 -->
	<div class="uk-form-group uk-margin">
		<label class="uk-form-label uk-form-large">图形验证码: </label>
		<div class="uk-form-controls">
			<div class="uk-flex">
				<div class="uk-margin-right">
					<input name="_vcode" type="text" class="uk-input uk-form-large" 
						   placeholder="图形验证码" 
						   validate="{
						   		required:true, 
						   		messages: {
									required:'请填写图形验证码'
						   		}
						   	}">
				</div>
				<div class="image vcode uk-form-large">
					<div><img src="/_api/xpmsns/user/user/vcode?width=150&height=40&size=20" width="150" uk-image> </div>
					<div class="uk-text-muted">看不清？点击刷新</div>
				</div>
			</div>
			<div class="uk-helper uk-helper-danger"></div>
		</div>
		
	</div> <!--  END 图形验证码 -->

	<!-- 更新按钮 -->
	<div class="uk-margin uk-margin-medium-top">
		<button class="uk-button uk-button-primary uk-form-large uk-action" style="width:100%;" type="submit"> 更新个人资料 </button>
	</div><!-- END 更新按钮 -->

</form>


<div class="container uk-hidden"><div class="row">
	<header>
		<div class="logo">
			<a href="/article"><img src="{{site.site_logo.url}}" alt=""  class="title_block"></a>
		</div>
	</header>
	
	<div class="form signin-form" mp:if="{{option.user_mobile_on == 1}}">
		<div class="form-header">
			<h3>登录{{site.site_name}}!</h3>
			<p>登录后, 您可以订阅、点赞、打赏、评论、收藏文章！</p>
		</div>
		
		<div class="alert alert-success alert-dismissible hidden" role="alert">
			<span class="message">错误描述</span>
		</div>

		<div class="alert alert-danger alert-dismissible hidden" role="alert">
			<button type="button" class="close" onclick="$(this).parent().addClass('hidden');">
			<span>&times;</span></button>
			<span class="message">错误描述</span>
		</div>

	
		<div class="form-group has-feedback">
			<input type="text"
				name="mobile"
				class="form-control input-lg" placeholder="手机号">
			<span class="icon glyphicon glyphicon-ok form-control-feedback hidden" ></span>
			<span class="help-block"></span>
		</div>

		<div class="form-group has-feedback">
			<input 
			name="password"
			type="password" class="form-control input-lg"  placeholder="密码">
			<span class="icon glyphicon glyphicon-ok form-control-feedback hidden" ></span>
			<span id="helpBlock" class="help-block"></span>
		</div>

		<div class="form-group">
			<div class="input-group">
				<input 
				name="_vcode"
				type="text" class="form-control input-lg" placeholder="图形验证码">
				<span class="input-group-addon input-lg image vcode">
					<img src="/_api/xpmsns/user/user/vcode?width=150&height=44&size=20">
				</span>
			</div>
			<span id="helpBlock" class="help-block"></span>
		</div>



		<div class="form-group">
			<button class="btn btn-primary btn-lg btn-block signin action" type="button">立即登录</button>
		</div>

		<hr />
		
		<div class="form-group" mp:if="{{option.user_wechat_on == 1}}"  >

			<a href="/user/signin/wechat" class="wechat text-wechat push-15-r" > 
				<i class="fab fa-weixin"></i> 使用微信登录
			</a>

			<a href="/user/signup" class="default " mp:if="{{option.user_mobile_signup_on == 1}}" > 
				没有账号？立即注册
			</a>
		</div>
			
	</div>

<!-- 
	***** 后台未开放用户注册权限 ************************************************************  
-->
	<div class="main" mp:else >
		<div class="form-header">
			<h2>未开放手机号登录</h2>
			<div class="form-group"  >
				<a href="/user/signin/wechat" class="wechat" mp:if="{{option.user_wechat_on == 1}}"  > 
					<img src="{{__STOR__::/__PROJECT_NAME/assets/user}}/images/wechat-color.svg" width="40">微信登录
				</a>
				<a href="/user/signup" class="default hidden " mp:if="{{option.user_mobile_signup_on == 1}}"  > 
					没有账号？立即注册
				</a>
			</div>
		</div>
	</div>

</div></div> <!-- END Row Container -->



</div> <!-- End uk-flex uk-flex-center -->
<include src="__WEB_ROOT__/desktop/common/foot.page" />