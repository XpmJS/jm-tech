<script type="text/javascript" mp:if="{{__var.__browser == 'wechat' }}">
	// 微信分享
	var code = '{{wechat.code}}'
	if ( code == '') {

		var imgUrl = "{{site.site_logo.url}}";
		var home = window.location.origin;
		
		if ( imgUrl[0] == '/') {
			imgUrl = home + imgUrl;
		}

		// console.log('weixin', '{{__var.__browser}}', '===');
		try {
			wx.config({
				debug: false, 
				appId:"{{wechat.appid}}", // 必填，公众号的唯一标识
				timestamp:"{{wechat.timestamp}}" , // 必填，生成签名的时间戳
				nonceStr:"{{wechat.noncestr}}", // 必填，生成签名的随机串
				signature:"{{wechat.signature}}",// 必填，签名，见附录1
				jsApiList:  ['onMenuShareTimeline','onMenuShareAppMessage','onMenuShareQQ','onMenuShareWeibo','onMenuShareQZone','startRecord','stopRecord','onVoiceRecordEnd','playVoice','pauseVoice','stopVoice','onVoicePlayEnd','uploadVoice','downloadVoice','chooseImage','previewImage','uploadImage','downloadImage','translateVoice','getNetworkType','openLocation','getLocation','hideOptionMenu','showOptionMenu','hideMenuItems','showMenuItems','hideAllNonBaseMenuItem','showAllNonBaseMenuItem','closeWindow','scanQRCode','chooseWXPay','openProductSpecificView','addCard','chooseCard','openCard'] // 必填，需要使用的JS接口列表，所有JS接口列表见附录2
			});  
			wx.ready(function(){

				wx.onMenuShareTimeline({
					title:"{{TRIM(current.name)}}|{{site.site_name}}", // 分享标题
					link: "{{wechat.url}}", // 分享链接，该链接域名或路径必须与当前页面对应的公众号JS安全域名一致
					imgUrl:imgUrl, // 分享图标
					success: function () { 
						// 用户确认分享后执行的回调函数
						alert('分享成功');

					},
					cancel: function () { 
						// 用户取消分享后执行的回调函数
						alert('分享失败');
					}
				});

				wx.onMenuShareAppMessage({
					title: "{{TRIM(current.name)}}|{{site.site_name}}", // 分享标题
					desc: "{{site.site_slogen}}", // 分享描述
					link: "{{wechat.url}}", 
					imgUrl:imgUrl, // 分享图标
					success: function () { 
						// 用户确认分享后执行的回调函数
						alert('分享成功');
					},
					cancel: function () { 
						// 用户取消分享后执行的回调函数
						alert('分享失败');
					}
				});

			});
		} catch( e ) {
			console.log('someting error');
		}
	}
</script>